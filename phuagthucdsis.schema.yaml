# Rime schema
# encoding: utf-8

schema:
  schema_id: phuagthucdsis
  name: ä»¿ç¾…é¦¬é€šå­—æ–¹æ¡ˆ
  version: "2022.02.7"
  author:
    - GwaiSyen <domgleisyen@foxmail.com>
  description: |
    åŸºäºå»£éŸ»éŸ³ç³»ï¼Œåƒæ”·ä¸Šå¤æ“¬éŸ³
    éŸ»å…¸ç¶²Â·å»£éŸ» http://ytenx.org/kyonh/
    https://zhuanlan.zhihu.com/p/388867479ä»¿ç¾…é¦¬é€šå­—æ–¹æ¡ˆ
  dependencies:
    - luna_pinyin
    - unicode
    - zyenpheng

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: half_shape
    states: [ å…¨è§’, åŠè§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@pinyin
    - affix_segmentor@zyenpheng
    - affix_segmentor@unicode
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator
    - script_translator@pinyin
    - script_translator@zyenpheng
    - table_translator@unicode
    - encode_commit_history
  filters:
    - simplifier
    - uniquifier
    - cjk_minifier
    - reverse_lookup_filter@gepxuuz

speller:
  alphabet: 'zyxwvutsrqponmlkjihgfedcbaABCDEFGHIJKLMNOPQRSTUVWXYZ;'
  delimiter: "'"
  algebra:




    - abbrev/([A-Z])[jxi](\w)/$1i$2/ #i=jxi
    - abbrev/([A-Z])[ywu](\w)/$1u$2/ #i=jxi
    - abbrev/(É™)([xhs])$/$1j$2/
    - abbrev/([A-Z][ev]?)[au]([jlr])/$1a$2/ #AJ
    - abbrev/([A-Z][e]?)[aou](v[xhs])/$1a$2/ #AV
    - abbrev/([A-Z][er]?)[o](v[xhs])/$1u$2/ #U
    - abbrev/([A-Z][r])[aeo](v[xhs])/$1a$2/ #RAV
    - abbrev/([A-Z][e]?)[eÉ™](v[xhs])/$1e$2/ #EV
    - abbrev/([A-Z][jx])[aeu](v[xhs])/$1e$2/ #EV
    - abbrev/([A-Z][jxi]?)[É™o](v[xhs])/$1É™$2/ #ÆV
    - abbrev/([A-Z][e]?)[ao]([vwy])/$1a$2/ #AV
    - abbrev/([A-Z][er]?)[o]([vwy])/$1u$2/ #U
    - abbrev/([A-Z][r])[aeo]([vwy])/$1a$2/ #RAV
    - abbrev/([A-Z][e]?)[euÉ™]([vwy])/$1e$2/ #EV
    - abbrev/([A-Z][jx])[aeu]([vwy])/$1e$2/ #EV
    - abbrev/([A-Z][jxi]?)[É™o]([vwy])/$1É™$2/ #ÆV
    - abbrev/[au]([ndzt])/a$1/ #AN
    - abbrev/[aÉ™]([ndzt])/e$1/ #
    - abbrev/([A-Z][jyxw])[aeu]([ndzt])/$1e$2/  #IEN
    - abbrev/([A-Z][jyxw])[ioÉ™]([ndzt])/$1i$2/  #IIN
    - abbrev/([A-Z][rf])[eiÉ™o]([ndzt])/$1e$2/  #REN
    - abbrev/([A-Z])[É™ou]([mbfp])/$1o$2/ #ÆM
    - abbrev/([A-Z][jx])[aeu]([mbfp])/$1e$2/  #IEM
    - abbrev/([A-Z][jx])[ioÉ™]([mbfp])/$1i$2/  #IIM
    - abbrev/([A-Z][r])[uo]([cgqk])/$12$3/  #RUÅŠ
    - derive/([A-Z][jxi])[É™oi]v([xhs])/$1u$2/ #å°¤å¹½ V U 
    - derive/([A-Z])[ij][É™o](v)/$1i$2/ #IU IÆV
    - derive/([A-Z]u)[É™o]([ndzt])/$1$2/ #IUN IÆN

    - derive/([A-Z])v(iÉ™v)/$1$2/ #VIÆåˆå£ä¹‹ V U
    - derive/([A-Z])(viÉ™)v/$1$2/
    - derive/([A-Z])[ji]É™(\w)/$1i$2/ #IÆ
    - derive/([A-Z])[yu]É™(\w)/$1u$2/ #UÆ
    - derive/([A-Z]v?)xÉ™([cgqk])/$1ri$2/ #è·IÆÅŠ IÅŠ -v
    - derive/([A-Z]v?)[ij]É™([cgqk])/$1i$2/

    - derive/([A-Z])y(\w)/$1vj$2/#ä»‹éŸ³
    - derive/([A-Z])f(\w)/$1vr$2/
    - derive/([A-Z])x(\w)/$1rj$2/
    - derive/([A-Z])w(\w)/$1ry$2/

    - derive/([PBM]|PH)v([aeiÉ™])/$1$2/ #å¹«çµ„
    - derive/([PBM]|PH)u([aeiÉ™])/$1i$2/ 
    - derive/([PBM]|PH)y([aeiÉ™])/$1j$2/ 
    - derive/([PBM]|PH)w([aeiÉ™])/$1x$2/ 


    - xform/Jj/j/
    - derive/JX[uw]([aeiouÉ™])/x$1/
    - derive/QZ[v]([aeiouÉ™])/x$1/



    - derive/([A-Z])([ev]?a)j/$1$2/ #AJ
    - derive/([A-Z][ev]?a)j$/$1x/ #AJ
    - derive/([A-Z][ev]?a)l$/$1h/ #AJ
    - derive/([A-Z][ev]?a)r$/$1s/ #AJ
    - derive/(\w)v([o][jlrndzt])/$1$2/ #ON VO
    - derive/(\w)vÉ™([ndzt])/$1o$2/ #ON VO
    - derive/([A-Z])e([aoÉ™])/$1$2/ #ä¸€ç­‰
    - derive/([A-Z])e([eu])/$1$2/ #å››ç­‰
    - derive/(ei)j/$1/ #EJ IJ E I
    - derive/ov/eu/ #çš‹
    - derive/É™(u)/$1/ #ä¾¯


    - derive/([A-Z])r([aeiouÉ™])/$1a$2/ #äºŒç­‰
    - derive/([A-Z])f([aeiouÉ™])/$1o$2/ #äºŒç­‰


    - erase/(^|')[hg][jy]/
    - erase/(^|')H[SZ][jy]/
    - derive/(^|')SC([jy])(?!$)/$1h$2/
    - derive/(^|')ZC([jy])(?!$)/$1g$2/

    - derive/[FRQ]//
    - derive/([KGTDJN])C/$1/
    - derive/((^|')([PBMTDNLKGSJ])(?!$))/\L$1\L/
    - derive/((^|')(([PTK]|T[SZ]|RT)H)(?!$))/\L$1\L/
    - derive/(^|')T[SZ](?!$)/ts/
    - derive/(^|')T[SZ]H(?!$)/tsh/
    - derive/(^|')D[ZS](?!$)/dz/
    - derive/(^|')D[ZS](?!$)/z/
    - derive/(^|')(SZ|ZS)(?!$)/sz/
    - derive/((^|')([SZ][SC]))(?!$)/\L$1\L/
    - derive/(^|')SS(?!$)/s/  
    - derive/(^|')[XH]Z(?!$)/g/
    - derive/(^|')(JX|XQ)(?!$)/x/
    - derive/(^|')NG(?!$)/ng/
    - derive/(^|')([XH]S|SX)(?!$)/hs/
    - derive/(^|')([XH]Z)(?!$)/hz/
    - derive/(^|')HQ(?!$)/hq/
    - derive/(^|')HQ(?!$)/A/

    - derive/(^|')([S]Z)(?!$)/$1\L$2/

    - derive/(^|')PH(?!$)/f/
    - derive/(^|')T[RC]?H(?!$)/r/
    - derive/(^|')T[SZ]H(?!$)/v/
    - derive/(^|')T[SZ](?!$)/c/
    - derive/(^|')T[SZ]H(?!$)/ch/
    - derive/(^|')KQ?H(?!$)/y/
    - derive/(^|')NGQ?(?!$)/w/
    - derive/(^|')([XH]S|SX)(?!$)/h/
    - derive/(^|')SZ(?!$)/x/#é‚ª
    - derive/(^|')HQ(?!$)/q/

    - derive/(\w[rs])[ptk]$/$1/
    - derive/([aeou])v([k])$/$1$2/
    - derive/([aeiouÉ™])x$/$1/
    - derive/(\w)vx$/$1v/
    - derive/(\w)vh$/$1w/
    - derive/(\w)vs$/$1y/
    - abbrev/(\w)[rs]([ptk])/$/$1r/ # éŸ»å°¾-è²èª¿
    - abbrev/(\w)(r([ptk])?)$/$1s/
    - abbrev/(É™)x$/$1j/
    - abbrev/(É™)h$/$1l/
    - abbrev/(É™)s$/$1r/
    - abbrev/(\w)j/$1/
    - abbrev/(\w)l$/$1h/
    - abbrev/(\w)r$/$1s/


###########

# éˆéŸ³ ([PTK]H?|[BDG]|H[SZQ]|[MX]|NG|X)
# éŠ³éŸ³ ([TDSNZ][C]|[TDN][R]|[TDSNL]|SZ|[TD][SZ]|[SZ]S)


  







  


  

    - abbrev/^([a-z]).+$/$1/ #é¦–å­—æ¯

    - derive/É™/eo/ #EOÉ™ eo
    - derive/É™/;/ #EOÉ™ eo


translator:
  dictionary: phuagthucdsis
  spelling_hints: 8
  prism: phuagthucdsis
  preedit_format:
    - xform/;/É™/
    - xform/([PTKQ])H/\L$1Ê°/
    - xform/SQ/Ï‡/
    - xform/ZQ/Ê/
    - xform/NG/Å‹/
    - xform/NQ/É´/
    - xform/A/Ê”/
    - xform/O/Ë¤/
    - xform/V/Ê·/
    - xform/Y/É¥/
    - xform/HQ/Ê”/
    - xform/eo/É™/
# # # # # 
gepxuuz:
  dictionary: phuagthucdsis
  overwrite_comment: false
  tag: [pinyin,zyenpheng]
  preedit_format:

pinyin:
  dictionary: luna_pinyin
  prefix: "i"
  # suffix: ";"
  tips: ã€”pinyinã€•
  tag: pinyin
  # closing_tips:
  # # contextual_suggestions: #å„ªåŒ–
 
zyenpheng:
  dictionary: zyenpheng
  prefix: "a"
  suffix: ";"
  tips: ã€”zyenphengã€•
  # contextual_suggestions: #å„ªåŒ–
  tag: zyenpheng


unicode:
  dictionary: unicode
  tag: unicode
  prefix: "u"
  # suffix: ";"
  tips: ã€”unicodeã€•

punctuator:
  import_preset: symbols

  half_shape:
  
    "`": ["`", "Â·"]
    "~": ["~", "~"]
    "!": [ "!","ï¼"]
    "@": ["@", "ï¼ ", "â˜¯"]
    "#": ["#", "ï¼ƒ", "âŒ˜"]
    "$": ["$", "ï¿¥", "â‚¬", "Â£", "Â¥", "Â¢", "Â¤"]
    "%": ["%", "ï¼…", "Â°", "â„ƒ"]
    "^": ["^", , "âŠ•", "â€¦â€¦", "â†‘"]
    "&": ["&", "âˆ©","âˆ§", "ï¼†"]
    "*": ["*", "Ã—", "âˆ™", "âˆ", "âˆ", "âˆ˜", "ãƒ»", "âŠ™", "â€»", "â‚", "ï¼Š"]
    "(": ["(", "ï¼ˆ"]
    ")": [")", "ï¼‰"]
    "-": ["-", "âˆ’", "âˆ–", "ï¼"]
    "_": ["_", "âˆ–", "â€”â€”"]
    "=": ["=", "ï¼","â‰œ",  "â‰", "â‰”", "â‰”", "â‰Ÿ", "â‰ ", "â‰¡", "â‰¢", "â‰£"]
    "+": ["+", "âˆ«", "âˆ‘", "â¨‹", "ï¼‹"]
    "[": ["[", "ã€Œ", "ã€", "ã€”", "ï¼»" ]
    "]": ["]", "ã€", "ã€‘", "ã€•", "ï¼½"]
    "{": ["{", "ã€", "ã€–", "ï½›"]
    "}": ["}", "ã€", "ã€—", "ï½"]
    ":": [":", "ï¼š"]
    ";": [";", "ï¼›"]

    "|": ["|", "âˆª"," âˆ¨", "Â¦", "Â§", "ï½œ"]
    "\\": ["\\", "ã€", "ï¼¼", "ã€€", "âˆ–"]
    "\'": ["\'", "â€˜", "â€™"] # ' 
    "\"": ["\"", "â€œ", "â€"] # '"
    "<": ["<", "ã€Š", "ã€ˆ", "Â«", "â€¹", "â†", "âˆˆ", "âŠ†", "âŠŠ", "âŠˆ"]
    ">": [">", "ã€‹", "ã€‰", "Â»", "â€º", "â†’", "âˆ‹", "âŠ‡", "âŠ‹", "âŠ‰"]
    ",": ["," ,  "ï¼Œ"]
    ".": ["." , "ã€‚" ,  "ï¼"]
    "?": ["?" ,"âˆ" , "ï¼Ÿ"]
    "/": ["/", "ã€",  "âˆ•", "Ã·", "âˆ‚", "ï¼"]
  symbols:
    "/sxuh": ["âˆ",  "â„µ", "â„¶", "â„·", "â„¸",  "âˆ›",  "âˆœ" ]
    "/dzjop": ["âˆ…",  "âŠ•",  "âˆ–",  "âˆ©", "âˆª", "âˆˆ", "âˆ‰",  "âˆŠ",  "âˆ‹",  "âˆŒ", "âˆ",  "âŠ†",  "âŠ‡",  "âŠˆ",  "âŠ‰",  "âŠŠ",  "âŠ‹",  "âŠ‚",  "âŠƒ",  "âŠ„",  "âŠ„"]
    "/tsjek": ["âˆ«",  "âˆ¬",  "âˆ­",  "âˆ®",  "âˆ¯",  "âˆ°",  "âˆ±",  "âˆ²",  "âˆ³"]
    "/muj": ["âˆ•", "Ã·", "âˆ‚",  "âˆ«",  "âˆ¬",  "âˆ­",  "âˆ®",  "âˆ¯",  "âˆ°",  "âˆ±",  "âˆ²",  "âˆ³",  "+",  "âˆ’",  "Ã—",  "Ã·", "âˆ", "âˆ‘"]
    "/muj": ["âˆ‚",  "ğœ•",  "ğ››"]
    "/svud": ["+",  "âˆ’",  "Ã—",  "Ã·",  "âˆ•",  "âˆš",  "â†‘", "âˆ", "âˆ‘"]
    "/logic": [ "âˆ€", "âˆƒ",  "âˆ„", "Â¬",   "âˆ§", " âˆ¨", "âŠ•"]

    "/deow": ["Ë¥",  "Ë¦",  "Ë§",  "Ë¨",  "Ë©",  "|",  "â€–",  "â†—",  "â†˜",  "êœ›",  "êœœ"]
    "/scjec": ["Ë",  "Ë‘",  "Ì†",  "Ëˆ",  "ËŒ",  ".",  "â€¿"]









  # full_shape:
key_binder:
  import_preset: default
  bindings:
ascii_composer:
    good_old_caps_lock: true
    switch_key: {Caps_Lock: noop, Control_L: noop, Control_R: noop, Eisu_toggle: clear, Shift_L: commit_code, Shift_R: commit_code}

recognizer:
  import_preset: default
  patterns:
    pinyin: "^i[a-z]*'?$"
    email: "^[a-z][-_.0-9a-z]*@.*$"
    punct: "/[a-zA-Z]*$" #é…åˆsymbols.yamlä¸­çš„ç‰¹æ®Šå­—ç¬¦è¼¸å…¥
    unicode: "^u[0-9abcde]*;?$"
    zyenpheng: "^a[a-z]*;?$"
